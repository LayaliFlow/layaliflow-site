<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LayaliFlow — Modest Activewear</title>
  <meta name="description" content="LayaliFlow crafts elegant, modest sportswear with breathable fabrics and thoughtful silhouettes." />

  <!-- Open Graph -->
  <meta property="og:title" content="LayaliFlow — Modest Activewear" />
  <meta property="og:description" content="Elegant, modest sportswear designed for movement and confidence." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://layaliflow.github.io/layaliflow-site/" />
  <meta property="og:image" content="https://layaliflow.github.io/layaliflow-site/images/crescent_logo.png" />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="images/crescent_logo.png">

  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- NAV -->
  <nav class="nav" role="navigation" aria-label="Primary">
    <div class="container inner">
      <a class="brand" href="#home" aria-label="LayaliFlow Home">
        <div class="logo">
          <img src="images/crescent_logo.png" alt="LayaliFlow Logo">
        </div>
        <span>LayaliFlow</span>
      </a>

      <!-- Search -->
      <div class="nav-actions" role="group" aria-label="Primary actions">
        <form class="search" role="search" aria-label="Site search" action="search.html">
          <input id="site-search" name="q" type="search" placeholder="Search pieces…" aria-label="Search featured pieces">
        </form>

        <!-- Icon buttons -->
        <button class="icon-btn" id="shopBtn" aria-label="Shop">
          <!-- Bag icon -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M6 2l1.5 4h9L18 2H6zM3 6h18v14H3V6z"/>
          </svg>
        </button>

        <button class="icon-btn" id="cartBtn" aria-label="Cart" aria-haspopup="dialog" aria-controls="cartDrawer" aria-expanded="false">
          <!-- Cart icon -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="9" cy="21" r="1"/>
            <circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l3.6 7.59L5.25 14H19a1 1 0 0 0 .96-.74L23 4H6"/>
          </svg>
          <span class="cart-badge" id="cartBadge">0</span>
        </button>

        <button class="icon-btn" id="menuBtn" aria-label="Menu" aria-haspopup="dialog" aria-controls="menuDrawer" aria-expanded="false">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M3 6h18M3 12h18M3 18h18" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header id="home" class="hero container">
    <div>
      <span class="chip" aria-label="Tagline"><span>☽</span> Modest. Effortless. Strong.</span>
      <h1>Modest activewear for movement and confidence.</h1>
      <p>
        LayaliFlow crafts loose, flowy, and high-performance clothing in beautiful tones—designed to support your training while honouring your style.
      </p>
      <div class="cta">
        <a class="btn-primary" href="#lookbook">Explore Collection</a>
        <a class="btn-ghost" href="#about">Our Story</a>
      </div>
      <p class="sub" style="margin-top:12px">FR bientôt • Shipping details coming soon</p>
    </div>
    <div class="hero-card" aria-hidden="true">
      <img src="images/active.png" alt="Active woman in LayaliFlow clothing">
    </div>
  </header>

  <!-- LOOKBOOK / PRODUCTS -->
  <section id="lookbook" class="section">
    <div class="container">
      <h2>Featured pieces</h2>
      <p class="sub">Beautiful palettes, technical fabrics, modest silhouettes.</p>
      <div class="grid" role="list">

        <!-- Hoodie -->
        <a class="card" href="hoodie.html" role="listitem" aria-label="View Turtleneck Hoodie">
          <img class="media" src="images/hoodie.png" alt="Turtleneck Hoodie">
          <div class="body">
            <div class="pill">Hoodie</div>
            <h3 style="margin:8px 0 6px">Turtleneck Hoodie</h3>
            <p class="sub">Mid-thigh length with wide hood. Breathable, cozy coverage.</p>
          </div>
        </a>

        <!-- Long-sleeve Top -->
        <a class="card" href="long-sleeve-top.html" role="listitem" aria-label="View Long-sleeve Top">
          <img class="media" src="images/long-sleeve-top.png" alt="Long-sleeve Top">
          <div class="body">
            <div class="pill">Training Top</div>
            <h3 style="margin:8px 0 6px">Long-sleeve Top</h3>
            <p class="sub">Loose fit with arm sleeves. Airy, stretch-friendly comfort.</p>
          </div>
        </a>

        <!-- Joggers -->
        <a class="card" href="oversized-joggers.html" role="listitem" aria-label="View Oversized Joggers">
          <img class="media" src="images/oversized-joggers.png" alt="Oversized Joggers">
          <div class="body">
            <div class="pill">Joggers</div>
            <h3 style="margin:8px 0 6px">Oversized Joggers</h3>
            <p class="sub">Wide-leg fit with top-opening pockets. Breathable, all-day wear.</p>
          </div>
        </a>

        <!-- Skirt‑Pants -->
        <a class="card" href="skirt-pants.html" role="listitem" aria-label="View A‑Line Training Skirt‑Pants">
          <img class="media" src="images/skirt-pants.png" alt="A‑Line Training Skirt‑Pants">
          <div class="body">
            <div class="pill">Skirt‑Pants</div>
            <h3 style="margin:8px 0 6px">A‑Line Training Skirt‑Pants</h3>
            <p class="sub">Flowy outer skirt with straight under‑leggings. Breathable, squat‑proof.</p>
          </div>
        </a>

      </div>
    </div>
  </section>

  <!-- ABOUT + SIZE GUIDE PREVIEW -->
  <section id="about" class="section">
    <div class="container two-col">
      <section class="our-story">
        <h2>Our story</h2>
        <p class="sub">Born in Montreal, inspired by movement and faith.</p>
        <p>
          We build long-lasting pieces with a modest cut and elegant lines. Our design language blends timeless elegance with functional comfort—soft drape, clean details, and a palette that evolves with the seasons—so you feel composed in every rep.
        </p>
        <ul>
          <li>Breathable, quick‑dry fabrics</li>
          <li>Opaque, squat‑proof leggings & skirt‑pants</li>
          <li>Thoughtfully curated colours with signature gold accents</li>
        </ul>
        <a href="about.html" class="more-link">More…</a>
      </section>
      <div>
        <h2>Size & fit</h2>
        <p class="sub">Simple guidance that respects different preferences.</p>
        <div class="card" role="region" aria-label="Size tips" style="padding:16px">
          <p><strong>Turtleneck Hoodie:</strong> choose your usual size for a roomy fit. Size up for extra length or sleeve space.</p>
          <p><strong>Long-sleeve Top:</strong> loose drape with dropped shoulders. Size up for added coverage and flow.</p>
          <p><strong>Oversized Joggers:</strong> relaxed fit with closed ankles. Stick to your usual size for comfort; size up for extra looseness.</p>
          <p><strong>A-Line Training Skirt-Pants:</strong> waist true-to-size; outer skirt is A-line for unrestricted movement.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="section">
    <div class="container faq">
      <h2>FAQ</h2>
      <p class="sub">We’ll update as production timelines firm up.</p>
      <details>
        <summary>When will products be available?</summary>
        <p>We’re finalizing suppliers now. Sign up below to be first to know.</p>
      </details>
      <details>
        <summary>Do you ship internationally?</summary>
        <p>We plan to start with Canada/US and expand based on demand.</p>
      </details>
      <details>
        <summary>How do returns work?</summary>
        <p>We’ll publish a straightforward, fair policy before launch.</p>
      </details>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="section" aria-labelledby="contact-heading">
    <div class="container two-col">
      <div>
        <h2 id="contact-heading">Stay in the loop</h2>
        <p class="sub">Questions, wholesale, or early access? Send us a note.</p>
        <form method="POST" action="https://formspree.io/f/mqalnlnv" aria-label="Contact form">
          <div>
            <label for="name">Name</label>
            <input id="name" name="name" required autocomplete="name" />
          </div>
          <div>
            <label for="email">Email</label>
            <input id="email" type="email" name="email" required autocomplete="email" />
          </div>
          <div>
            <label for="message">Message</label>
            <textarea id="message" name="message" rows="5" required></textarea>
          </div>

          <!-- Set a custom subject + add a honeypot anti‑spam field -->
          <input type="hidden" name="_subject" value="New message from LayaliFlow website" />
          <input type="text" name="website" tabindex="-1" autocomplete="off" style="display:none">

          <input type="hidden" name="_redirect" value="https://layaliflow.github.io/layaliflow-site/thank-you.html">

          <button class="btn-primary" type="submit">Send</button>
        </form>
      </div>
      <div>
        <div class="card" style="padding:16px">
          <h3 style="margin-top:0">Brand palette</h3>
          <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:10px">
            <div style="background:#f6f5f3;border-radius:12px;aspect-ratio:1/1"></div>
            <div style="background:#e9e5dd;border-radius:12px;aspect-ratio:1/1"></div>
            <div style="background:#c7a36e;border-radius:12px;aspect-ratio:1/1"></div>
            <div style="background:#8b6b3e;border-radius:12px;aspect-ratio:1/1"></div>
            <div style="background:#1f1f1f;border-radius:12px;aspect-ratio:1/1"></div>
          </div>
          <p class="sub" style="margin-top:10px">Neutral earth tones with soft gold accents.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Side drawer + backdrop -->
  <div class="drawer-backdrop" id="drawerBackdrop" hidden></div>

  <aside class="drawer" id="menuDrawer" role="dialog" aria-modal="true" aria-labelledby="drawerTitle" hidden>
    <header class="drawer-header">
      <h2 id="drawerTitle">Menu</h2>
      <button class="drawer-close" data-drawer-close aria-label="Close menu">&times;</button>
    </header>

    <nav class="drawer-nav" aria-label="Secondary">
      <a href="about.html">About</a>
      <a href="index.html#faq">FAQ</a>
      <a href="privacy.html">Privacy</a>
      <hr>
      <a href="account.html">Account details</a>
      <a href="signin.html">Sign in</a>
      <a href="settings.html">Settings</a>
    </nav>
  </aside>

  <!-- SHOP drawer -->
  <aside class="drawer" id="shopDrawer" role="dialog" aria-modal="true" aria-labelledby="shopDrawerTitle" hidden>
    <header class="drawer-header">
      <h2 id="shopDrawerTitle">Shop</h2>
      <button class="drawer-close" data-drawer-close aria-label="Close shop">&times;</button>
    </header>

    <nav class="drawer-nav" aria-label="Shop categories">
      <!-- Simple, accessible accordions using <details> -->
      <details>
        <summary>Tops</summary>
        <div class="drawer-links">
          <a href="hoodie.html" data-filter="hoodie">Turtleneck Hoodie</a>
          <a href="long-sleeve-top.html" data-filter="top">Long‑sleeve Top</a>
        </div>
      </details>

      <details>
        <summary>Bottoms</summary>
        <div class="drawer-links">
          <a href="skirt-pants.html" data-filter="skirt-pants">A‑Line Skirt‑Pants</a>
          <a href="oversized-joggers.html" data-filter="joggers">Oversized Joggers</a>
        </div>
      </details>

      <details>
        <summary>Accessories</summary>
        <div class="drawer-links">
          <a href="#">Coming soon</a>
        </div>
      </details>

      <hr>

      <a href="lookbook.html">All products</a>
      <a href="search.html?q=new">New arrivals</a>
      <a href="search.html?q=sale">Sale</a>
    </nav>
  </aside>

  <aside class="drawer" id="cartDrawer" role="dialog" aria-modal="true" aria-labelledby="cartDrawerTitle" hidden>
    <header class="drawer-header">
      <h2 id="cartDrawerTitle">Your cart</h2>
      <button class="drawer-close" data-drawer-close aria-label="Close cart">&times;</button>
    </header>

    <div class="cart-body">
      <!-- Empty state -->
      <div class="cart-empty" id="cartEmpty" hidden>
        <div class="bag-illus" aria-hidden="true">
          <img src="images/shopping-bag.png" alt="" />
        </div>
        <h3>Your cart is empty</h3>
        <p class="sub">There are no products in your cart</p>
        <a class="btn-primary cart-cta" href="lookbook.html">Shop all products</a>
        <a class="muted-link cart-login" href="signin.html">Sign in to your account</a>
      </div>

      <!-- Populated state -->
      <div class="cart-has-items" id="cartHasItems" hidden>
        <ul class="cart-list" id="cartList" aria-label="Cart items"></ul>

        <div class="cart-summary">
          <div class="cart-subline">
            <span>Subtotal</span>
            <strong id="cartSubtotal">$0.00</strong>
          </div>
          <p class="muted">Taxes and shipping calculated at checkout.</p>

          <!-- Only checkout here -->
          <div class="cart-cta">
            <button id="checkoutBtn" class="btn-primary" disabled>Checkout</button>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container" style="display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap">
      <small>© <span id="year"></span> LayaliFlow. All rights reserved.</small>
      <div style="display:flex;gap:14px">
        <a href="https://www.instagram.com/layali.flow/" target="_blank" rel="noreferrer" aria-label="Instagram">Instagram</a>
        <a href="mailto:flow.layali@gmail.com?subject=Inquiry%20from%20LayaliFlow%20Website" rel="noreferrer" aria-label="Email">flow.layali@gmail.com</a>
        <a href="privacy.html" aria-label="Privacy">Privacy</a>
      </div>
    </div>
  </footer>

  <script>
  (() => {
    // Year
    const y = document.getElementById('year');
    if (y) y.textContent = new Date().getFullYear();

    /* =========================
      DRAWERS (menu / shop / cart)
    ========================== */
    const backdrop = document.getElementById('drawerBackdrop');
    const drawers = {
      menu: { button: document.getElementById('menuBtn'),  panel: document.getElementById('menuDrawer') },
      shop: { button: document.getElementById('shopBtn'),  panel: document.getElementById('shopDrawer') },
      cart: { button: document.getElementById('cartBtn'),  panel: document.getElementById('cartDrawer') }
    };

    function openDrawer(key) {
      const slot = drawers[key];
      if (!slot?.panel) return;

      // Close any open drawer first
      Object.values(drawers).forEach(({ panel }) => panel?.removeAttribute('open'));

      // Reveal + animate current
      slot.panel.hidden = false;
      backdrop.hidden = false;
      requestAnimationFrame(() => slot.panel.setAttribute('open', ''));
      slot.button?.setAttribute('aria-expanded', 'true');

      // Focus management
      const firstFocusable = slot.panel.querySelector('a, button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      setTimeout(() => (firstFocusable ? firstFocusable.focus() : slot.panel.querySelector('[data-drawer-close]')?.focus()), 10);

      if (key === 'cart') renderCart(); // Always refresh cart when opened
    }

    function closeAll() {
      Object.values(drawers).forEach(({ button, panel }) => {
        if (!panel) return;
        panel.removeAttribute('open');
        button?.setAttribute('aria-expanded', 'false');
        setTimeout(() => { panel.hidden = true; }, 200);
      });
      backdrop.hidden = true;
    }

    // Wire buttons
    drawers.menu.button?.addEventListener('click', () => openDrawer('menu'));
    drawers.shop.button?.addEventListener('click', () => openDrawer('shop'));
    drawers.cart.button?.addEventListener('click', () => openDrawer('cart'));

    // Close handlers
    backdrop?.addEventListener('click', closeAll);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeAll(); });
    document.querySelectorAll('[data-drawer-close]').forEach(btn => btn.addEventListener('click', closeAll));
    document.querySelectorAll('.drawer a').forEach(a => a.addEventListener('click', closeAll));

    /* =========================
      MINI‑CART
    ========================== */
    const CART_KEY   = 'lf_cart';
    const badge      = document.getElementById('cartBadge');
    const listEl     = document.getElementById('cartList');
    const emptyEl    = document.getElementById('cartEmpty');
    const hasEl      = document.getElementById('cartHasItems');
    const subtotalEl = document.getElementById('cartSubtotal');
    const checkoutBtn= document.getElementById('checkoutBtn');

    const getCart = () => {
      try { return JSON.parse(localStorage.getItem(CART_KEY)) || []; }
      catch { return []; }
    };

    const setCart = (items) => {
      localStorage.setItem(CART_KEY, JSON.stringify(items));
      updateBadge(items);
    };

    const updateBadge = (items = getCart()) => {
      const count = items.reduce((n, it) => n + (it.qty || 0), 0);
      if (badge) badge.textContent = count;
    };

    const money = (n) =>
      new Intl.NumberFormat(undefined, { style: 'currency', currency: 'CAD' }).format(n || 0);

    function renderCart() {
      const items = getCart();
      const hasItems = items.length > 0;

      // Toggle empty vs has‑items sections (mutually exclusive)
      if (emptyEl && hasEl) {
        if (hasItems) {
          emptyEl.setAttribute('hidden', '');
          hasEl.removeAttribute('hidden');
        } else {
          hasEl.setAttribute('hidden', '');
          emptyEl.removeAttribute('hidden');
          if (checkoutBtn) checkoutBtn.disabled = true;
        }
      }

      if (!hasItems) return;

      // Build list
      if (listEl) listEl.innerHTML = '';
      let subtotal = 0;

      items.forEach((it, idx) => {
        const price = Number(it.price || 0);
        const qty   = Number(it.qty || 1);
        subtotal += price * qty;

        const li = document.createElement('li');
        li.className = 'cart-item';
        li.innerHTML = `
          <div class="cart-thumb">${it.img ? `<img src="${it.img}" alt="">` : ''}</div>
          <div class="cart-info">
            <div class="title">${it.title || 'Item'}</div>
            <div class="meta">${[it.color, it.size].filter(Boolean).join(' • ')}</div>
            <div class="cart-qty">
              <button class="qty-btn" data-act="dec" data-i="${idx}" aria-label="Decrease quantity">−</button>
              <span aria-live="polite">${qty}</span>
              <button class="qty-btn" data-act="inc" data-i="${idx}" aria-label="Increase quantity">+</button>
              <button class="remove-btn" data-act="remove" data-i="${idx}">Remove</button>
            </div>
          </div>
          <div style="align-self:center; font-weight:600;">${money(price * qty)}</div>
        `;
        listEl?.appendChild(li);
      });

      if (subtotalEl)  subtotalEl.textContent = money(subtotal);
      if (checkoutBtn) checkoutBtn.disabled  = subtotal <= 0;
    }

    // Single delegated handler (no rebinding each render)
    if (listEl) {
      listEl.onclick = (e) => {
        const btn = e.target.closest('[data-act]');
        if (!btn) return;

        const i   = Number(btn.getAttribute('data-i'));
        const act = btn.getAttribute('data-act');
        const cur = getCart();
        const item = cur[i];
        if (!item) return;

        if (act === 'inc') item.qty = (item.qty || 1) + 1;
        if (act === 'dec') item.qty = Math.max(1, (item.qty || 1) - 1);
        if (act === 'remove') cur.splice(i, 1);

        setCart(cur);
        renderCart();
      };
    }

    // Expose helper so product pages can add items:
    // window.addToCart({id, title, price, img, color, size, qty:1})
    window.addToCart = (item) => {
      const cur = getCart();
      const key = (v) => [v.id, v.color, v.size].join('|');
      const k   = key(item);
      const found = cur.find(x => key(x) === k);

      if (found) found.qty = (found.qty || 1) + (item.qty || 1);
      else cur.push({ ...item, qty: item.qty || 1 });

      setCart(cur);
      openDrawer('cart');   // visual feedback
      renderCart();         // ensure UI reflects the change immediately
    };

    // Initial sync on page load
    updateBadge();
    renderCart();
  })();
  </script>

</body>
</html>
